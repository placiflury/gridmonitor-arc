<%inherit file="/base/siteadmin.html"/>

<h2>Jobs 'Statistics' of last 4 weeks</h2>
<p> This page vizualizes accouting data collected by the SGAS accouting system of 
the clusters you administer (or have been allowed to view). The resolution of the 
accounting data is in the range of 1 day (i.e. all job parameters submitted during 
a day have been summed up.)
</p>
<table>
%for cluster_name in c.n_jobs_max.keys():
<tr>
<td>
<h3> ${cluster_name}</h3>
<img style="border: 1px solid black;" src="http://chart.apis.google.com/chart?
cht=bvg
&amp;chma=30,30,30,30
&amp;chs=600x150
&amp;chco=4682B4,055670
&amp;chf=bg,lg,0,F5FFFA
&amp;chd=t:${c.n_job_series[cluster_name]}|${c.major_page_faults_series[cluster_name]}
&amp;chds=0,${'%0.2f' % (c.n_jobs_max[cluster_name] * 1.1)},0,${'%0.2f' % (c.major_page_faults_max[cluster_name] * 1.1)}
&amp;chxr=1,0,${'%0.2f' % (c.n_jobs_max[cluster_name] *1.1)}|2,0,${'%0.2f' % (c.major_page_faults_max[cluster_name] * 1.1)}
&amp;chbh=6,1,4
&amp;chxt=x,y,r
&amp;chxl=0:|${c.dates}
&amp;chxp=0,2,27,52,77,98.5
&amp;chg=25,25,5,0
&amp;chdl=number%20of%20jobs|number%20of%20major%20page%20faults
&amp;chdlp=b"     
alt="Number of Jobs and Major Page Faults Chart for ${cluster_name}"
</td><td> 
    <table>
        <tr class="table_head3"><th></th> <th>Jobs </th> <th>Major Page Faults </th></tr>
        <tr> <td>Max [#/day] </td> 
            <td> ${c.n_jobs_max[cluster_name]}</td> 
            <td> ${c.major_page_faults_max[cluster_name]}</td>
        </tr>
        <tr> <td> Avg [#/day]</td><td> -- </td> <td> -- </td> </tr>
        <tr> <td> Tot [#/month] </td><td> </td> <td> </td> </tr>
    </table>
</td>
</tr>
<tr>
<td>
<img style="border: 1px solid black;" src="http://chart.apis.google.com/chart?
cht=bvg
&amp;chma=30,30,30,30
&amp;chs=600x150
&amp;chco=4682B4,055670
&amp;chf=bg,lg,0,F5FFFA
&amp;chd=t:${c.cpu_series[cluster_name]}|${c.wall_series[cluster_name]}
&amp;chds=0,${'%0.2f' % (c.cpu_duration_max[cluster_name] * 1.1)},0,${'%0.2f' % (c.wall_duration_max[cluster_name] * 1.1)}
&amp;chxr=1,0,${'%0.2f' % (c.cpu_duration_max[cluster_name] * 1.1)}|2,0,${'%0.2f' % (c.wall_duration_max[cluster_name] * 1.1)}
&amp;chbh=6,1,4
&amp;chxt=x,y,r
&amp;chxl=0:|${c.dates}
&amp;chxp=0,2,27,52,77,98.5
&amp;chg=25,25,5,0
&amp;chdl=CPU_time%20[minutes]|wall_time%20[minutes]
&amp;chdlp=b"     
alt="CPU and Walltime durations for ${cluster_name}"
/>
</td><td>
    <table>
        <tr class="table_head3"><th></th> <th>CPU duration </th> <th>Wall duration </th></tr>
        <tr> <td>Max [min/day] </td> 
            <td> ${"%0.2f" % (c.cpu_duration_max[cluster_name])}</td> 
            <td> ${"%0.2f" % (c.wall_duration_max[cluster_name])}</td>
        </tr>
        <tr> <td> Avg [min/day]</td><td> -- </td> <td> -- </td> </tr>
        <tr> <td> Tot [hour/day] </td><td> </td> <td> </td> </tr>
    </table>
    </td>
</tr>
<tr><td>
<img style="border: 1px solid black;" src="http://chart.apis.google.com/chart?
cht=bvg
&amp;chma=30,30,30,30
&amp;chs=600x150
&amp;chco=4682B4,055670
&amp;chf=bg,lg,0,F5FFFA
&amp;chd=t:${c.user_series[cluster_name]}|${c.kernel_series[cluster_name]}
&amp;chds=0,${'%0.2f' % (c.user_time_max[cluster_name] * 1.1)},0,${'%0.2f' % (c.kernel_time_max[cluster_name] * 1.1)}
&amp;chxr=1,0,${'%0.2f' % (c.user_time_max[cluster_name] * 1.1)}|2,0,${'%0.2f' % (c.kernel_time_max[cluster_name] * 1.1)}
&amp;chbh=6,1,4
&amp;chxt=x,y,r
&amp;chxl=0:|${c.dates}
&amp;chxp=0,2,27,52,77,98.5
&amp;chg=25,25,5,0
&amp;chdl=user_time%20[minutes]|kernel_time%20[minutes]
&amp;chdlp=b"     
alt="User and Kernel Time durations in minutes for ${cluster_name}"
/>
</td><td>
    <table>
        <tr class="table_head3"><th></th> <th>User Time</th> <th> Kernel Time </th></tr>
        <tr> <td>Max [min/day] </td> 
            <td> ${"%0.2f" % (c.user_time_max[cluster_name])}</td> 
            <td> ${"%0.2f" % (c.kernel_time_max[cluster_name])}</td>
        </tr>
        <tr> <td> Avg [min/day]</td><td> -- </td> <td> -- </td> </tr>
        <tr> <td> Tot [hour/day] </td><td>--  </td> <td>-- </td> </tr>
    </table>
</td></tr>
%endfor
</table>

